<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description"
    content="An integrated software platform for smarter collaboration between sales agents and bank authorities" />
  <title>Heatmap</title>
  <!-- Favicon -->
  <link href="img/brand/favicon.png" rel="icon" type="image/png" />
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
  <!-- Icons -->
  <link href="vendor/nucleo/css/nucleo.css" rel="stylesheet" />
  <link href="vendor/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet" />
  <!-- Argon CSS -->
  <link type="text/css" href="css/argon.min.css?v=1.0.0" rel="stylesheet" />
  <!-- CountUp.js -->
  <script src="./js/countUp.min.js" type="module"></script>

  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NKDMSK6" height="0" width="0"
      style="display:none;visibility:hidden"></iframe></noscript>
  <script src="./js/countUp.min.js"></script>
  <!-- leaflet.js + heatmap.js -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.5.1/dist/leaflet.css"
   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
   crossorigin=""/>
<script src="https://unpkg.com/leaflet@1.5.1/dist/leaflet.js"
   integrity="sha512-GffPMF3RvMeYyc1LWMHtK8EbPv0iNZ8/oTtHPx9/cc2ILxQ+u905qIwdpULaqDkyBKgOaB57QTMg7ztg8Jm2Og=="
   crossorigin=""></script>
<script src="./js/heatmap.js"></script>
<script src="./js/leaflet-heatmap.js"></script>

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <!-- Icons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#2b5797">
<meta name="theme-color" content="#7C62E4"/>

<link rel="icon" href="favicon.ico" type="image/x-icon" />  
<meta name="apple-mobile-web-app-capable" content="yes">  
<meta name="apple-mobile-web-app-status-bar-style" content="black"> 
<meta name="apple-mobile-web-app-title" content="WikiPills">
</head>

<body>
  <!-- Sidenav -->

  <!-- Main content -->
  <div class="main-content">
    <!-- Top navbar -->
    <nav class="navbar navbar-top navbar-expand-md navbar-dark" id="navbar-main">
      <div class="container-fluid">
        <!-- Brand -->
        <a class="navbar-brand pt-0" href="./dashboard.html">
          <b>
            <font style="font-size: 4vw;" color="#fb6340">Wiki<font color="#f4f5f7">Pills</font></font>
          </b>
        </a>
        
        <!-- User -->
        <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link nav-link-icon" href="./index.html">
                <i class="ni ni-key-25"></i>
                <span class="nav-link-inner--text">Login</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-link-icon" href="#">
                <i class="ni ni-archive-2"></i>
                <span class="nav-link-inner--text">Doctors</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link nav-link-icon" href="./public.html">
                <i class="ni ni-world"></i>
                <span class="nav-link-inner--text">Public Data</span>
              </a>
            </li>
          </ul>
    </nav>

    <!-- Header -->
    <div class="header bg-gradient-primary pb-8 pt-5 pt-md-8">
      <div class="container-fluid">
        <div class="header-body">
          <!-- Card stats -->
          <div class="row">
            <div class="col-xl col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        People Affected
                      </h5>
                      <span class="h2 font-weight-bold mb-0">13,05,502</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                        <i class="fas fa-users"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 14.52%</span>
                    <span class="text-nowrap">Since last month</span>
                  </p>
                </div>
              </div>
            </div>
            <!--<div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Total Patients
                      </h5>
                      <span class="h2 font-weight-bold mb-0" id="target2">3,528</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                        <i class="fas fa-chart-pie"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-green mr-2"><i class="fas fa-arrow-up"></i> 3.48%</span>
                    <span class="text-nowrap">Since last week</span>
                  </p>
                </div>
              </div>
            </div>-->
            <div class="col-xl-3 col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        Death Rate %
                      </h5>
                      <span class="h2 font-weight-bold mb-0" id="target3">3.02%</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                        <i class="fas fa-percent"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fa fa-arrow-down"></i> 2.48%</span>
                    <span class="text-nowrap">Since last month</span>
                  </p>
                </div>
              </div>
            </div>
            <div class="col-xl col-lg-6">
              <div class="card card-stats mb-4 mb-xl-0">
                <div class="card-body">
                  <div class="row">
                    <div class="col">
                      <h5 class="card-title text-uppercase text-muted mb-0">
                        People Recovered
                      </h5>
                      <span class="h2 font-weight-bold mb-0">8,49,431</span>
                    </div>
                    <div class="col-auto">
                      <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                        <i class="fas fa-users"></i>
                      </div>
                    </div>
                  </div>
                  <p class="mt-3 mb-0 text-muted text-sm">
                    <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 45.67%</span>
                    <span class="text-nowrap">Since last week</span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Page content -->
    <div class="container-fluid mt--7">
      <div class="row">
        <div class="card col">
          <br>
            <div class="row"><div class="col-2"><h2>Epidemic Report for</h2></div>
            <div class="col-4">
            <select id="prod1" class="custom-select custom-select-sm" onchange="orders1(this.value)">
                <option disabled>Select an epidemic</option>
                <option selected value="1">Mild Cold</option>
                <option value="2">Ebola</option>
                <option value="3">Chicken Pox</option>
                <option value="4">Swine Flu</option>
                
            </select></div></div>
          <br>
          <h2>Common disease near your area: <b>COVID-19</b></h2>
          <div id="mapid"></div>
          <br>
          <style>
              #mapid{
                height: 50vw;
              }
          </style>
            <script>

                var baseLayer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                  maxZoom: 18,
                  id: 'mapbox.streets',
                  accessToken: 'pk.eyJ1IjoieWFzaGphaXN3YWwxIiwiYSI6ImNrMXVqcWZsaTB4OGQzYmthbHI1bXQ3dWoifQ.yI_Z7RUmBhSC9mti6naJhA'
                });
                
                var cfg = {
                  // radius should be small ONLY if scaleRadius is true (or small radius is intended)
                  // if scaleRadius is false it will be the constant radius used in pixels
                  "radius": 75,
                  "maxOpacity": .8,
                  // scales the radius based on map zoom
                  "scaleRadius": false,
                  // if set to false the heatmap uses the global maximum for colorization
                  // if activated: uses the data maximum within the current map boundaries
                  //   (there will always be a red spot with useLocalExtremas true)
                  "useLocalExtrema": true,
                  // which field name in your data represents the latitude - default "lat"
                  latField: 'lat',
                  // which field name in your data represents the longitude - default "lng"
                  lngField: 'lng',
                  // which field name in your data represents the data value - default "value"
                  valueField: 'count'
                };
                
                var heatmapLayer = new HeatmapOverlay(cfg);
                
                
                //var mymap = L.map('mapid').setView([51.505, -0.09], 7);
                  var mymap = new L.map('mapid', {
                    center: new L.LatLng(25.6586, -80.3568),
                    zoom: 4,
                    layers: [baseLayer, heatmapLayer]
                  });
                
                  baseLayer.addTo(mymap);
                
                  var testData = {
                  max: 5,
                  data: [{lat: 17.4098, lng:77.1673, count: 5},{lat: 17.3598, lng:77.0673, count: 5},{lat: 17.2463, lng:78.7766, count: 4},{lat: 12.6553, lng: 75.4793, count: 3},{lat: 15.7544, lng: 76.8281, count: 3},{lat: 16.4301, lng: 75.6673, count: 3},{lat: 28.445626, lng: 77.203939, count: 3},{lat: 28.047042, lng: 77.647144, count: 3},{lat: 28.441715, lng: 79.231653, count: 2}]
                };
                
                  heatmapLayer.setData(testData);
                
                /*  var baseLayer = L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}', {
                  attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery Â© <a href="https://www.mapbox.com/">Mapbox</a>',
                  maxZoom: 18,
                  id: 'mapbox.satellite',
                  accessToken: 'pk.eyJ1IjoieWFzaGphaXN3YWwxIiwiYSI6ImNrMXVqcWZsaTB4OGQzYmthbHI1bXQ3dWoifQ.yI_Z7RUmBhSC9mti6naJhA'
                }).addTo(mymap);
                */
                
                getLocation();
                
                function getLocation() {
                  if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                  } else {
                    x.innerHTML = "Geolocation is not supported by this browser.";
                  }
                }
                
                function showPosition(position) {
                  console.log("Latitude: " + position.coords.latitude);
                  console.log("Longitude: " + position.coords.longitude);
                  var lat = position.coords.latitude;
                  var long = position.coords.longitude;
                  var marker = L.marker([lat, long]).addTo(mymap).bindPopup("<b>Current Location</b>");
                  //mymap.panTo(new L.LatLng(lat, long));
                  mymap.flyTo(L.latLng(lat,long), 6);
                }
                
                
                
                  </script>
        </div>
      </div>
        <script>
          function topProd() {
            switch (document.getElementById("region").value) {
              case '1':
                document.getElementById("top").innerText = ': Corporate Finance';
                console.log("A");
                break;
              case '2':
                document.getElementById("top").innerText = ': Retail Loans';
                console.log("B");
                break;
              case '3':
                document.getElementById("top").innerText = ': Agricultural Loans';
                break;
              case '4':
                document.getElementById("top").innerText = ': Term (Fixed) Deposit';
                break;
              case '5':
                document.getElementById("top").innerText = ': SME Loans';
                break;
              case '6':
                document.getElementById("top").innerText = ': Priority Sector Loans';
                break;
              case '7':
                document.getElementById("top").innerText = ': Current/Saving Account (CASA)';
                break;
              case '8':
                document.getElementById("top").innerText = ': Educational Loans';
                break;
            }
          }
        </script>
      </div>

      <br>


    <!-- Footer -->
    <footer class="footer">
      <div class="row align-items-center justify-content-xl-between">
        <div class="col-xl-6">
          <div class="copyright text-center text-xl-left text-muted">
            &nbsp; An integrated platform for
            <a href="https://aws.amazon.com/" class="font-weight-bold ml-1" target="_blank">Amazon Web Services</a>
          </div>
        </div>
        <!--<div class="col-xl-6">
          <ul class="nav nav-footer justify-content-center justify-content-xl-end">
            <li class="nav-item">
              <a href="#" class="nav-link" target="_blank">Branch
                Locator</a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link" target="_blank">Contact
                Us</a>
            </li>
            <li class="nav-item">
              <a href="#" class="nav-link" target="_blank">Feedback</a>
            </li>
          </ul>
        </div>-->
      </div>
    </footer>

    <script>
      function addEvent(event, elem, func) {
        if (elem.addEventListener)
          // W3C DOM
          elem.addEventListener(event, func, false);
        else if (elem.attachEvent) {
          // IE DOM
          elem.attachEvent("on" + event, func);
        } else {
          // No much to do
          elem["on" + event] = func;
        }
      }

      function redirectToLogin() {
        if (this.status === 200) {
          return (window.location = this.responseURL || "/login");
        }
      }

      function logout(event) {
        if (!event.target.className.includes("logout")) {
          return;
        }

        var xhr = new XMLHttpRequest();

        xhr.addEventListener("load", redirectToLogin);
        xhr.open("POST", "/logout");
        xhr.send();
      }

      var bodyElement = document.querySelector("body");
      addEvent("click", bodyElement, logout);
    </script>
  </div>
  </div>

  <!-- Core -->
  <script src="vendor/jquery/dist/jquery.min.js"></script>
  <script src="vendor/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Docs JS -->
  <script src="vendor/anchor-js/anchor.min.js"></script>
  <script src="vendor/clipboard/dist/clipboard.min.js"></script>
  <script src="vendor/holderjs/holder.min.js"></script>
  <script src="vendor/prismjs/prism.js"></script>
  <!-- Optional JS -->
  <script src="vendor/chart.js/dist/Chart.min.js"></script>
  <script src="vendor/chart.js/dist/Chart.extension.js"></script>
  <script src="vendor/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
  <!-- Argon JS -->
  <script src="js/argon.min.js?v=1.0.0"></script>

 <!-- Firebase -->
 <!-- The core Firebase JS SDK is always required and must be listed first -->
 <script src="/__/firebase/7.9.1/firebase-app.js"></script>

 <!-- TODO: Add SDKs for Firebase products that you want to use
      https://firebase.google.com/docs/web/setup#available-libraries -->
 <script src="/__/firebase/7.9.1/firebase-database.js"></script>
 
 <!-- Initialize Firebase -->
 <script src="/__/firebase/init.js"></script>
 <script src="./index.js"></script>
</body>

</html>